---
layout: post
title: 我的linux之旅（更新完毕）
date: 2007-11-05
tags: ["linux","linux","ubuntu","启动","安装","虚拟机"]
---

# 我的linux之旅

> 本文做于2007年5月，整理编辑于2007-11-05
> 

算起来， 我用linux和学习它也有半年多了，如今我已经彻底地习惯了使用linux。

但真正的用linux还是最近一个月，原来最初了解linux时就知道Redhat比较有名，于是网上到处搜索关于Redhat和linux的文章。我想要学习linux，首先要安装一个linux操作系统。这时我在图书馆看书知道了不少东西，第一个是虚拟机，可以虚拟一个操作系统的软件，也就听说了Vmware与vitual PC，第二个是知道装linux并不容易,我明白了除了windows的fat32和ntfs分区格式以外，世界上还存在着linux独有的分区格式。但当时我对分区格式一点都不懂，也很少亲自装过操作系统，像ghost和fdisk还不会用。当明白要装Linux就必须要划出一定的分区，格式化为linux的ext3分区格式才行，便觉得有点难度了，更重要的是我始终弄不懂挂载这个词是什么意思，这在windows里从来没听过的，后来明白Linux采用文件管理方式，不论磁盘设备，还是真正的文件，Linux都会看作是文件处理，于是会有把某个磁盘分区挂载到/boot之类的文件夹下；第二是知道引导程序这个概念，原来Linux广泛采用grub来引导系统，当时我并不知道grub为何物，自然就更不知道在dos下也能用grub了。

<!--more-->

为了更加明白操作系统的引导原理，我专门在图书馆里借了本关于操作系统的引导原理的书籍，这本书对我的影响颇大，就是这本书让我清楚地学习了windows系列的各个系统，包括dos，Windows 2K，Windows NT的开机原理。所以我现在介绍一下我当前的操作系统状况来讲的更清楚些，本来我只有windowsXP，然后装了Ubuntu 7.04，于是图方便把grub装在第一个分区的mbr里，但我的第一个分区在xp下是主分区且是NTFS格式，现在我用linux习惯了，要改C盘的东西还得回XP，太麻烦了，后来装了ntfs-3g的软件，但有个问题是开机不能自动挂载NTFS分区，非得手动挂载，好像比以前更麻烦了，本来我对NTFS分区主要是读，写也只是稍微改动，我就没打算用NTFS分区存数据，于是毫不犹豫地删除了ntfs-3g，好长时间我也懒得去管这事，要改NTFS分区里的数据，我就直接进XP，但不知怎的，我的XP开机奇慢无比，开机自启动程序我连防火墙ZoneAlarm都给去掉了，如今只启动Kaspersky和Ctfman，但仍然要近两分钟才进入桌面，尤其是欢迎屏幕到进入桌面，简直慢得要死，我实在是受不了了，我其实早已清楚的认识到我的XP该重装了，以前我的XP总有ghost备份，现在我早就删了也懒得备份，正好我也想换个别的版本的XP，以前装XP，只用过番茄花园的，现在我现在有DeepinXP的ISO镜像，何不来个硬盘安装，首先我要把grub赶出mbr，这时突然灵机一动，何不把C盘给格式化了，只装一个OS losder，这样如果成功的化也证明一下我对OS Loader的认识水平，也顺便发扬一下DIY精神。

说干就干，我得先设计好原理。

（1）先得用fdisk /disk 命令把C盘得mbr给格式化了，当时我漏了重要得一步，这是我后来在网上查到得，就是要用fixmbr命令对C盘fix一下，到此mbr已经搞定，接着mbr会寻找NT的内核并显示boot.ini的内容。

（2）copy以下文件到C盘： ntldr detect.com boot.ini 到C盘。

（3）此时OS Loader还只能引导XP，不能引导linux，再来个grub for dos就OK了，这个我相当在行，拷贝grldr menu.lst 两个文件到C盘，当时我的grub for dos比较特别，是我以前从一键ghost上弄来的，由于我用它习惯了，就一直用它，接下来编辑boot.ini，在末行添加"c:\\grldr="my dos"，把"defaut="设置为此项，当OS loader引导grldr项后显示menu.lst上面的内容，一切OK，有了grub自然就能引导linux了。这一大段是写我的现在的操作系统状况，我并没有装XP，其实我用OS loader也是迫不得已，我懒得去刻Ubuntu的光盘，我每次装linux都是从硬盘安装，省钱嘛！

当时我学习开机引导原理时间最长，接下来凭着学习的这么多知识，应该可以安装了吧！但为了安全起见，我还是选择先在虚拟机里模拟安装一下，熟悉一下流程。我选择在Vitual PC里安装Redhat Linux 9，安装过程一路顺利，跟书上描述的一摸一样，没有任何差错，但等到重启后进入系统后却是一个黑屏，只能看到一个硕大的鼠标箭头，好困惑，不知道为什么，没办法只有重新安装一遍看看如何，谁知重装后还是一样。就这样我捣鼓了一个下午，我推测在虚拟机里安装Linux出现这种状况，如果安装XP也是这样的话，那就说明是虚拟机本身有问题。于是我就试着装了一下XP，安装后一切正常，虚拟机里的XP也运行正常。我实在想不出办法来，不过我仍没有放弃，决定换用Vmware试一下，安装Linux后竟一切正常，算是终于搞定了。由于当时不大会用虚拟机，不会在虚拟机里用Linux上网，相当不爽，还是安装真正的Linux爽。接下来机开始在我的电脑上真正安装Linux，那是我不大会硬盘安装Linux，于是下狠心花了9元买了Redhat 9的光盘，以表明自己学习Linux的决心。当时觉得有讽刺意义的是有版权保护的Windows XP 只卖3元，而免费的Linux由于有3张光盘却卖9元，禁不住偷笑中国的盗版现状。光盘买后，很快就顺利安装上了，但Redhat却没识别出我的网卡。上不了网，我不得不切换到Windows下google了好半天，网上的经验是要么寻找Linux发烧友制作的驱动凑合，要么就自己动手编译。这是由于Redhat的版本已经很老了，现在Redhat公司已经把它的桌面版本整合到Fedora Project里了，最新的版本是Fedora Core 6。Google了一下，它的安装光盘竟近3个GB。想到我可怜的100K网速要下载3GB的东西，真担心要下载到什么时候啊，但为了Linux还是下载吧！第一次下载我选择了DVD版本，谁知道下载到30%，迅雷竟提示数据错误，然后又重新回到了10％，接着速度便一直在10K以下，这样下载是肯定下载不完了，无奈之际决定重新下载CD版的，虽然要下载六张光盘，但还一直顺利，从早上6点到下午6点刚好下载完。晚上吃过饭就开始安装，尽管此时我对硬盘安装已经十分熟悉了，但安装仍然不顺利，中途提示镜像文件破坏，我记下了那个文件的名字，然后重启后重新安装，在选择软件时不再安装它，中途又提示另一个文件受破坏，这个文件明显时openoffice中的一个文件，没办法为避免再次这样，第三次装时直接取消了整个openoffice的安装，连其它我认为没必要的都一概都不安装，第三次终于成功。所有的设备识别正常，也可以上网了，尽管默认的字体不大好看，但在经历了这么多挫折后能上网我已经很知足了，尽管打开网页的速度奇慢。毕竟第一次真正使用Linux，当然什么都不会，对整个系统十分好奇，想在上面安装个软件试试，于是在网上搜索了一下RPM格式的软件，但是firefox默认的下载工具好像不大听使唤，试了好几次都没下载下来一个东西，没办法只有切换到XP下载下来一大堆RPM包像Xmms，mplayer，然后切换到Linux下试着安装，没有意外的提示错误无法安装，试着用RPM命令安装，终端提示好像是gcc依赖关系未解决之类的，后来猜是安装系统时没安装gcc的缘故吧。既然RPM包无法安装，源码安装可能行吧，结果源码安装仍提示gcc未安装。最后我连gcc都下载了，编译了半天仍不行，看来如此只有放弃了。继续googe，发现fedora下可以用yum安装软件，于是在终端下输入命令yum install xmms-mp3，还是提示一大堆错误，好像是yum配置错误，反正乱七八糟的，当时也看不懂，也不管了在网上google了半天，胡乱捣腾地修改yum的配置，谁知yum竟然能用了。不过速度慢的惊人，下载个Xmms才几M的东西就花了一个多小时。还好最后Xmms还是安装好了，兴奋地先播放个mp3歌曲试试，没有任何反应。继续google，说是解码器的问题，显然已经超出了我的能力范围，试了下Fedora自带的播放器，也播放不了rmvb和mp3格式，要知道我的电脑里面，音乐只有mp3格式，电影只有rmvb格式。要使用Linux系统，，电影暂时可以不看，起码应该能听歌吧。后来想到了一个笨方法，我查了下好像linux可以播放wav格式的音乐文件，然后在XP下用千千静听把我盘里张学友的歌全转换为wav格式。这下linux的世界里终于有音乐的声音了，不过没办法装软件始终不爽，又没办法在linux下聊天，有好久我都一直用XP。之间一直很平静，甚至我都很少关注linux，也不去用Fedora了，但它也就一直呆在我的硬盘里没删，有段时间我拷电影太多了，差不整个硬盘都塞满了，我都舍不得把Fedora给删了。最终还是下狠心把电影给删了。

这学期开学，突然又想linux了，这可是我的心病啊！不摆平它，我就一直心里不安，加上之前我在google中总结的经验，再加上刚开学又学习了不少东西。鉴于上学期遭受的挫折，现在突然也想换个别的版本的linux试试，兴许没这么多挫折，但redhat太根深蒂固了，从我知道linux起就知道redhat最牛。Google中无意看到有人推荐debian，由于是第一次听说debian，十分感兴趣，但刚好那篇文章说debian对中文支持不大好，debian安装后默认不支持中文，需要中文美化后才行，一看到这儿我就彻底放弃了。像我这样的破烂英文水平，怎么用一个英文系统，这不开玩笑吗？正看这篇关于debian的文章时，突然记得以前装Fedora时一篇文章极力推荐Ubuntu，说得挺实诚的，说Ubuntu如何如何的好，说的我都心动了。google了一下，发现华军上竟也有Ubuntu，就下载了回来，先准备在虚拟机里安装下试试，发现那个ISO光盘镜像根本就无法引导启动，当时也就试试，就无所谓地删了，也没网上查下是为什么，反正我就没顺利地装过linux（有点讽刺地味道哦～～）！也不知什么原因，我又下载了debian，结果是安装到中间提示要从镜像下载文件，由于我地Vmware是个精简版本，默认不打开网络服务，就毫不犹豫地点了"否"，结果呢，就只装了个命令行地debian，简直是无情的打击！不服！我来个国产的试试，网上说红旗linux中文支持最好，就下载了个Redflag dsktop 5.0，在虚拟机里装还是不成。我开始怀疑我的虚拟机是不是出问题了，于是直接来了个硬盘安装，这次是直接把原来闲在硬盘里的Fedora给覆盖了。又没成功！至于失败的原因，反正乱七八糟的，最后只好下载了个Redflag desktop 4.0在虚拟机里安装成功了，不过国产货效果真差！咋就长得跟XP一样呢。不过它自带Xmms，照样播放mp3时没声音，我看见它的界面就反感，对这个国产的玩意毫无兴趣，也懒得去整它。没有像Fedora那样一下子就能吸引人，尽管我还不大能用它，但我有兴趣折腾它。

好久以后，我意外地发现网上竟有好多关于Ubuntu的文章，文章介绍说Ubuntu最近横扫桌面市场，相当地火！恰好我刚好真正习惯了用Firefox浏览器，而且它在linux里也是默认的浏览器。我对Firefox简直是爱不释手，最早用它时不会设置，觉得跟Mathon比十分别扭，甚至不明白IE下的"收藏夹"在Firefox下管它叫"书签"，后来搜索到了firefox的附加软件中文站，安装了好多的扩展，逐渐设置的熟练了，越来越顺手了，渐渐发现它实在是太强大了，正如网上说的"世界上有了Firefox，不明白为什么还有人在IE？"。其实呢，IE在Windows下是捆绑销售的产品，要不然怎么可能会有那么多人用它。说实在的，那个Windows自带的IE真烂，我都怀疑全世界到底有多少人在研究它的漏洞，而IE默认是以管理员的身份运行的，自然是危险了。自从我用了firefox的N多插件后，竟发现离不了firefox了。而linux大部分发行版都是默认firefox浏览器，岂不更爽。Google了半天，认真的看了好多Ubuntu硬盘安装方法的文章，各类文章介绍的真是详细，其实我现在我再安装各个版本的linux也都算是轻车熟路许多细节也就没必要看，原理跟安装Fedora类似。原来硬盘安装Ubuntu要alternate版，下载OK后，开始硬盘安装，刚开始安装还顺利，但到安装应用软件时就卡到85％了，此时我怀疑是ISO镜像文件有问题，就重新下载了一遍，重新安装仍是卡到85％，我都快崩溃了。这时我才想起来google了，网上介绍说是卡到85％是因为要从网上下载一些中文环境文件，网上推荐安装时选择英文环境，并安装前拔掉网线，这次重装一切OK！顺利地进入了桌面，接着照着网上说的，安装了中文支持，但是firefox和openoffice还是英文环境，不过firefox我早就用熟了，openoffice反正也不常用，也就无所谓，能顺利进入桌面已经很让我安慰了！

如今Ubuntu下可以上网了，就照着网上说的把我的桌面及系统弄的有声有色，Ubuntu下有了apt，安装软件实在太方便了，就大肆安装软件，好好地过把瘾，而且又安装了kde和xfce两个桌面环境。不得不说Ubuntu太棒了！到现在我才真正找到一个好用的linux版本。下面我也就谈谈我这一个月用Ubuntu的经历和感想，纵观我这么多次安装linux，我觉得到了Ubuntu桌面应用做的已经很不错了，但若真要是超越Windows，Ubuntu还有很多路要走。安装Ubuntu后，发现它的操作太爽了，尤其是那个"添加/删除程序"太方便了，新立得里安装程序也同样方便。但缺点我也发现了，就是删除软件仍是不大方便。一般我安装一个软件，安装前先再google里一下要安装软件得名称，然后在"添加/删除程序"里查找是否存在对应的软件，有的话就直接安装了，这是最方便了，没有的话再在新立得里搜索安装。然而删除软件时就没这么方便了，在"添加/删除程序"里好多软件由于依赖关系无法删除，只有到新立得里删除，然而面对新立得里众多的软件新手无论如何也不清楚到底该删除哪个。像我的系统共存着gnome、xfce、kde三个桌面环境，软件包多达1700多个，例如我要干净地把我当初安装xfce时所有地软件包去删除，还真是个头疼地问题。其实新立得完全可以记录每次安装的软件包，以便到时好删除，但似乎整个linux界似乎都缺乏用户体验，很难从用户的角度考虑。

Ubuntu用久了，知道虚拟机VirtualBox挺不错的，就用VirtualBox装了个Deepin XP，配合Ubuntu用起来相当完美，速度的确不错。突然我又想起我的Fedora了，加上用Ubuntu的经验，现在想重新认识一下Fedora，毕竟在我心里它是痛！由于先前Fedora 6无法安装软件给我留下了很深的印象，这次我选择安装最新的Fedora 7，现在VirtualBox里安装，而且Fodora 7提供了LiveCD版，才700多M（呵呵，免去了我下载3GB的DVD了）。在虚拟机里安装十分顺利，但由于LiveCD安装又在虚拟机里，速度是慢了点。Fedora 7跟Fedora 6区别不大，这次我重新认真地学习了yum的用法，先yum了个fastestyum地插件，然后导入lina地RPM仓库，为避免软件冲突，我选择只用lina一个第三方软件仓库。到Fedora 7，Fedora Core与Fedora Extra整合为一个Fedora了，许多第三方软件都逐渐转向了官方仓库。用yum update更新系统速度仍是很慢，我猜可能是与在虚拟机里有关吧。另一方面，尽管yum用fastestyum插件自动为镜像按连接速度排队，但实际上离大陆最近的镜像服务器在香港，速度自然慢很多了，不像Debian、Ubuntu的APT可以直接设置为国内源，yum其实也可以用国内源，但设置比较复杂，不适合大众用户，而且国内大部分的Fedora镜像还没提供Fedora 7的支持呢。另外网上介绍用Axel给yum加速，原理是让yum调用Axel开多线程下载，但方法过于复杂且不是最终的解决方法，而且linux下提倡单线程下载。我认为Fedora要想占领桌面市场，yum的性能亟需提高，我总不能下载一个不到5M的程序就要半个多小时吧。Yum还有个不便之处就是下载文件是不显示下载速度，只显示进度条，有点不爽。撇开速度不谈，yum的设置跟APT还差不多一样方便，同样yum也有前端GUI程序像yumex，kyum，类似于新立得。解决软件包依赖问题方面，网上评价APT优于yum，特别示aptitude在这方面更优秀。Fedora现在做的逐渐跟上了潮流，美工做的不错，而且从Fedora 7开始提供LiveCD版本了，LiveCD版本还分基于gnome、kde两个桌面的，有点Kubuntu、Xubuntu的味道。

Ubuntu基于Debian构建，Debian本身就是一个十分优秀的发行版本。对Debian我是无比的佩服，它简直是太伟大了，完全基于GNU发布，Debian也是唯一的非商业性的linux发行版本，而且一直以运行稳定可靠著称。Debian靠成千上万的开源工作者维护，采用先进的deb软件包管理系统，简直是Linux史上的一大创举，之后RedHat效仿创建了RPM软件包管理系统。

Ubuntu不仅继承了Debian的安全性和稳定性，而且更加易用和美观，并将Linux推向了桌面应用的最高峰。Ubuntu的核心部分与Debian类似，所以用过Debian的用户用Ubuntu很快就能上手。Ubuntu 7.04安装后默认界面就十分漂亮，借助Debian庞大的帮助文档，一旦Ubuntu出什么问题，很容易找到相应的帮助文档，而且Ubuntu有一个非常不错的中文官方论坛。Ubuntu主要是面向桌面应用，软件更新比Debian较快，而且可用软件也较多，Ubuntu安装后许多配置默认就已经设置好了，所以很容易上手。我从使用Ubuntu至今还没出现过死机现象，稳定性还是可以的。如今windows vista的推广也面临一定的困难，如果Ubuntu趁此机遇争取更多的桌面用户，做好用户体验，相信就不再是微软的垄断天下了。